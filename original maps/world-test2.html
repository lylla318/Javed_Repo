<!DOCTYPE html>
<meta charset="utf-8">
<style>

.graticule {
  fill: none;
  stroke: #777;
  stroke-width: .5px;
  stroke-opacity: .5;
}

.land {
  fill: #222;
}

.boundary {
  fill: none;
  stroke: #fff;
  stroke-width: .5px;
}

</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>

<script>

var data = [
   // {"coAuthors": 6480, "country":"nausa", "name": "United States"},
   {"coAuthors": 440, "country": "eudeu", "name": "Germany"},
   {"coAuthors": 325, "country": "aschn", "name": "China"},
   {"coAuthors": 291, "country": "eugbr", "name": "United Kingdom"}, 
   {"coAuthors": 224, "country": "eufra", "name": "France"}, 
   {"coAuthors": 216, "country": "askor", "name": "South Korea"},
   {"coAuthors": 145, "country": "astwn", "name": "Taiwan"  },
   {"coAuthors": 139, "country": "euita", "name": "Italy" },
   {"coAuthors": 134, "country": "asjpn", "name": "Japan" },
   {"coAuthors": 126, "country": "nacan", "name": "Canada"  },
   {"coAuthors": 123, "country": "euche", "name": "Switzerland" },
   {"coAuthors": 120, "country": "ocaus", "name": "Australia" },
   {"coAuthors": 114, "country": "eunld", "name": "Netherlands" },
   {"coAuthors": 89, "country": "aschl", "name": "Chile" },
   {"coAuthors": 75, "country": "eugrc", "name": "Greece"  },
   {"coAuthors": 75, "country": "euesp", "name": "Spain" },
   {"coAuthors": 74, "country": "asrus", "name": "Russia"  },
   {"coAuthors": 73, "country": "assgp", "name": "Singapore" },
   {"coAuthors": 70, "country": "eudnk", "name": "Denmark" },
   {"coAuthors": 62, "country": "asisr", "name": "Israel"  },
   {"coAuthors": 61, "country": "eucze", "name": "Czech Republic"  },
   {"coAuthors": 49, "country": "saarg", "name": "Argentina" },
   {"coAuthors": 48, "country": "asind", "name": "India" },
   {"coAuthors": 46, "country": "assau", "name": "Saudi Arabia"  },
   {"coAuthors": 41, "country": "sabra", "name": "Brazil"  },
   {"coAuthors": 38, "country": "eunor", "name": "Norway"  },
   {"coAuthors": 32, "country": "eubel", "name": "Belgium" },
   {"coAuthors": 24, "country": "saper", "name": "Peru"  },
   {"coAuthors": 22, "country": "eusvn", "name": "Slovenia"},
   {"coAuthors": 21, "country": "ocnzl", "name": "New Zealand" },
   {"coAuthors": 18, "country": "euswe", "name": "Sweden"  },
   {"coAuthors": 18, "country": "astur", "name": "Turkey"  },
   {"coAuthors": 16, "country": "euaut", "name": "Austria" },
   {"coAuthors": 15, "country": "eufin", "name": "Finland" },
   {"coAuthors": 12, "country": "samex", "name": "Mexico" },
   {"coAuthors": 12, "country": "astha", "name": "Thailand"  },
   {"coAuthors": 9,  "country": "asmys", "name": "Malaysia"  },
   {"coAuthors": 7,  "country": "eubol", "name": "Bolivia" },
   {"coAuthors": 7,  "country": "sacol", "name": "Colombia"  },
   {"coAuthors": 6,  "country": "afuga", "name": "Uganda" },
   {"coAuthors": 5,  "country": "euisl", "name": "Iceland" },
   {"coAuthors": 5,  "country": "napan", "name": "Panama" },
   {"coAuthors": 5,  "country": "euprt", "name": "Portugal"  },
   {"coAuthors": 5,  "country": "afzaf", "name": "South Africa"},
   {"coAuthors": 4,  "country": "nacri", "name": "Costa rica"},
   {"coAuthors": 4, "country": "afeth", "name": "Ethiopia"},
   {"coAuthors": 4, "country": "euirl", "name": "Ireland"},
   {"coAuthors": 4, "country": "eultu", "name": "Lithuania"},
   {"coAuthors": 4, "country": "asqat", "name": "Qatar"},
   {"coAuthors": 4, "country": "saven", "name": "Venezuela"},
   {"coAuthors": 3, "country": "asirn", "name": "Iran"},
   {"coAuthors": 3, "country": "afmar", "name": "Morocco"},
   {"coAuthors": 2, "country": "afdza", "name": "Algeria"},
   {"coAuthors": 2, "country": "afciv", "name": "Cote Ivoire"},
   {"coAuthors": 2, "country": "euhun", "name": "Hungary"},
   {"coAuthors": 2, "country": "asidn", "name": "Indonesia"},
   {"coAuthors": 2, "country": "afken", "name": "Kenya"},
   {"coAuthors": 2, "country": "aflby", "name": "Libya"},
   {"coAuthors": 2, "country": "asphl", "name": "Philippines"},
   {"coAuthors": 2, "country": "aslka", "name": "Sri lanka"},
   {"coAuthors": 2, "country": "sasur", "name": "Surinam"},
   {"coAuthors": 2, "country": "saury", "name": "Uruguay"},
   {"coAuthors": 1, "country": "afcmr", "name": "Cameroon "},
   {"coAuthors": 1, "country": "euhrv", "name": "Croatia"},
   {"coAuthors": 1, "country": "nagtm", "name": "Guatemala"},
   {"coAuthors": 1, "country": "afgin", "name": "Guinea"},
   {"coAuthors": 1, "country": "nahnd", "name": "Honduras "},
   {"coAuthors": 1, "country": "aslbn", "name": "Lebanon"},
   {"coAuthors": 1, "country": "afmrt", "name": "Mauritania"},
   {"coAuthors": 1, "country": "asnpl", "name": "Nepal"},
   {"coAuthors": 1, "country": "nanic", "name": "Nicaragua"},
   {"coAuthors": 1, "country": "asomn", "name": "Oman"},
   {"coAuthors": 1, "country": "eupol", "name": "Poland"},
   {"coAuthors": 1, "country": "eusrb", "name": "Serbia"},
   {"coAuthors": 1, "country": "afsle", "name": "Sierra Leone"},
   {"coAuthors": 1, "country": "euukr", "name": "Ukraine"}
  ];

var width = 960,
    height = 547,
    coauthors = d3.set(data.map(function(d){ return d.coAuthors; }))

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var projection = d3.geoEquirectangular()
  .scale(153)
  .translate([width / 2, height / 2])
  .precision(.1);

var path = d3.geoPath()
    .projection(projection);

var graticule = d3.geoGraticule();

var color = d3.scaleOrdinal()
    .domain(d3.range(9).reverse())
    .range(["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]);

d3.queue()
    .defer(d3.json, "world-50m.json")
    .await(ready);

function ready(error, world) {
  if (error) throw error;

  d3.json("world-50m.json", function(error, world) {
    if (error) throw error;

    var countries = topojson.feature(world, world.objects.land);

    console.log(countries);

    /*countries.features.forEach(function(country, i) {
      console.log(country);
    });*/

    svg.insert("path", ".graticule")
        .datum(topojson.feature(world, world.objects.land))
        .attr("class", "land")
        .style("fill", function(d){
          console.log(d);
          return "#ddd";
        })
        .attr("d", path);

    svg.insert("path", ".graticule")
        .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))
        .attr("class", "boundary")
        .attr("d", path)
        .style("fill", "#ddd");
  });

  d3.select(self.frameElement).style("height", height + "px");

}

</script>


</body>
</html>





